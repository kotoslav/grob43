[{"/home/syvv/projects/grob43/admin/src/index.js":"1","/home/syvv/projects/grob43/admin/src/store/UserStore.js":"2","/home/syvv/projects/grob43/admin/src/store/ItemStore.js":"3","/home/syvv/projects/grob43/admin/src/App.js":"4","/home/syvv/projects/grob43/admin/src/http/userAPI.js":"5","/home/syvv/projects/grob43/admin/src/components/AppRouter.js":"6","/home/syvv/projects/grob43/admin/src/http/itemAPI.js":"7","/home/syvv/projects/grob43/admin/src/routes.js":"8","/home/syvv/projects/grob43/admin/src/utils/consts.js":"9","/home/syvv/projects/grob43/admin/src/http/index.js":"10","/home/syvv/projects/grob43/admin/src/pages/Admin.js":"11","/home/syvv/projects/grob43/admin/src/pages/Auth.js":"12","/home/syvv/projects/grob43/admin/src/components/NavBar.js":"13","/home/syvv/projects/grob43/admin/src/components/modals/CreateItem.js":"14","/home/syvv/projects/grob43/admin/src/components/modals/CreateCategory.js":"15","/home/syvv/projects/grob43/admin/src/components/PaginationPages.js":"16","/home/syvv/projects/grob43/admin/src/components/ItemList.js":"17","/home/syvv/projects/grob43/admin/src/components/CategoriesBar.js":"18","/home/syvv/projects/grob43/admin/src/components/Item.js":"19","/home/syvv/projects/grob43/admin/src/components/CategoryForm.js":"20","/home/syvv/projects/grob43/admin/src/components/ItemForm.js":"21"},{"size":415,"mtime":1697422449325,"results":"22","hashOfConfig":"23"},{"size":362,"mtime":1698026518283,"results":"24","hashOfConfig":"23"},{"size":897,"mtime":1698026518253,"results":"25","hashOfConfig":"23"},{"size":1210,"mtime":1698026518230,"results":"26","hashOfConfig":"23"},{"size":456,"mtime":1697680640067,"results":"27","hashOfConfig":"23"},{"size":777,"mtime":1697680640057,"results":"28","hashOfConfig":"23"},{"size":1570,"mtime":1698058198649,"results":"29","hashOfConfig":"23"},{"size":318,"mtime":1697422449328,"results":"30","hashOfConfig":"23"},{"size":158,"mtime":1697422449328,"results":"31","hashOfConfig":"23"},{"size":304,"mtime":1697680640067,"results":"32","hashOfConfig":"23"},{"size":2892,"mtime":1698026518253,"results":"33","hashOfConfig":"23"},{"size":2104,"mtime":1698026518253,"results":"34","hashOfConfig":"23"},{"size":841,"mtime":1697680640067,"results":"35","hashOfConfig":"23"},{"size":3112,"mtime":1698026518253,"results":"36","hashOfConfig":"23"},{"size":3021,"mtime":1698026518253,"results":"37","hashOfConfig":"23"},{"size":1063,"mtime":1698026518253,"results":"38","hashOfConfig":"23"},{"size":2187,"mtime":1698052341693,"results":"39","hashOfConfig":"23"},{"size":4363,"mtime":1698026518230,"results":"40","hashOfConfig":"23"},{"size":1294,"mtime":1698026518230,"results":"41","hashOfConfig":"23"},{"size":7436,"mtime":1698057369443,"results":"42","hashOfConfig":"23"},{"size":12163,"mtime":1698026518250,"results":"43","hashOfConfig":"23"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},"if3321",{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"49","messages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"51","messages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"46"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60"},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"63","messages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"46"},{"filePath":"70","messages":"71","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"72","messages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"74","messages":"75","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"76","messages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"78","messages":"79","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"46"},{"filePath":"81","messages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"46"},{"filePath":"84","messages":"85","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"86","messages":"87","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"88","messages":"89","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90"},{"filePath":"91","messages":"92","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"46"},"/home/syvv/projects/grob43/admin/src/index.js",[],["94","95"],"/home/syvv/projects/grob43/admin/src/store/UserStore.js",[],"/home/syvv/projects/grob43/admin/src/store/ItemStore.js",[],"/home/syvv/projects/grob43/admin/src/App.js",["96","97","98","99","100"],"import React, { useContext, useEffect, useState } from 'react';\nimport { BrowserRouter } from 'react-router-dom/cjs/react-router-dom';\nimport AppRouter from './components/AppRouter';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from './index';\nimport { check } from './http/userAPI';\nimport { readAllCategory, itemReadAllByCategory } from './http/itemAPI';\n\nconst App = observer (() => {\n    const {user, item} = useContext(Context);\n     const [loading, setLoading] = useState(true);\n\n     useEffect(() => {\n        check()\n        .then(data => {\n            user.setIsAuth(true)\n        })\n        .catch((e) => {\n            user.setIsAuth(false)\n        }\n        )\n        .finally(() => setLoading(false));\n/*\n        readAllCategory().then(\n            data => {\n                item.setCategories(data);\n                //item.setSelectedCategory({...data[0]});\n            }\n        );\n        itemReadAllByCategory(item.selectedCategory.id).then(\n            data => item.setItems(data)\n        );\n*/\n\n    }, [])\n\n    return (\n        <BrowserRouter>\n            <AppRouter />\n        </BrowserRouter>\n    );\n});\n\nexport default App;\n","/home/syvv/projects/grob43/admin/src/http/userAPI.js",[],"/home/syvv/projects/grob43/admin/src/components/AppRouter.js",[],"/home/syvv/projects/grob43/admin/src/http/itemAPI.js",["101"],"import { $host } from \"./index\";\n\nexport const categoryCreateOne = async (form) => {\n    const { data } = await $host.post('api/category/', { ...form });\n    return data;\n}\n\nexport const readAllCategory = async () => {\n    const { data } = await $host.get('api/category/');\n    return data;\n}\n\nexport const categoryRemove = async (id) => {\n    const { data } = await $host.delete(`api/category/${id}`);\n    return data;\n}\n\nexport const categoryUpdate = async (form, id) => {\n    const { data } = await $host.patch(`api/category/${id}`, { ...form });\n    return data;\n}\n\n\nexport const itemCreateOne = async (form) => {\n    const { data } = await $host.post('api/item/', { ...form });\n    return data;\n}\n\nexport const itemReadAllByCategory = async (categoryId, page) => {\n    const { data } = await $host.get('api/item/category/', {\n        params: {\n            categoryId: categoryId,\n            page\n        }\n    });\n    return data;\n}\n\nexport const itemUpdate = async (form, id) => {\n    const { data } = await $host.patch(`api/item/${id}`, { ...form });\n    return data;\n}\n\nexport const itemRemove = async (id) => {\n    const { data } = await $host.delete(`api/item/${id}`);\n    return data;\n}\n\nexport const uploadImage = async (file) => {\n    const formData = new FormData();\n    formData.append('img', file);\n    const {data} = await $host.post('api/gallery/', formData);\n    return data;\n}\n\nexport const deleteImage = async (path) => {\n    const {data} = await $host.delete('api/gallery', { data : {\"path\": path} }).catch(e => console.log(e))\n    return true;\n}\n","/home/syvv/projects/grob43/admin/src/routes.js",[],"/home/syvv/projects/grob43/admin/src/utils/consts.js",[],"/home/syvv/projects/grob43/admin/src/http/index.js",[],"/home/syvv/projects/grob43/admin/src/pages/Admin.js",["102"],"import React, { useState, useContext, useEffect} from 'react';\nimport NavBar from '../components/NavBar';\nimport { Button, Col, Container, Row } from 'react-bootstrap';\nimport CategoriesBar from '../components/CategoriesBar';\nimport ItemList from '../components/ItemList';\nimport CreateCategory from '../components/modals/CreateCategory';\nimport CreateItem from '../components/modals/CreateItem';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../index';\nimport { itemReadAllByCategory, readAllCategory } from '../http/itemAPI';\nimport PaginationPages from '../components/PaginationPages';\n\n\nconst Admin = observer ( () => {\n    const {item} = useContext(Context);\n\n    useEffect(() => {\n        readAllCategory().then(\n            data => {\n                item.setCategories(data);\n                if (!item.selectedCategory.id)\n                item.setSelectedCategory({...data[0]})\n            }\n        );\n\n        itemReadAllByCategory(item.selectedCategory.id, item.page).then(\n        data => {item.setItems(data);\n        }\n    );\n    }, [item.page, item.selectedCategory])\n\n    const [categoryVisible, setCategoryVisible] = useState(false);\n    const [itemVisible, setItemVisible] = useState(false);\n    const [modalCategory, setModalCategory] = useState({});\n    const [modalItem, setModalItem] = useState({});\n    return (\n        <div className='bg-secondary' style={{minHeight:\"100vh\", height: '100%', paddingBottom:'3rem'}}>\n            <NavBar />\n            <Container>\n                <Row className='mt-2'>\n                    <Col md={3}>\n                    <CategoriesBar\n                    modal={{categoryVisible, setCategoryVisible, modalCategory, setModalCategory}}\n                    />\n                    </Col>\n                    <Col md={9}>\n\n                    {item.selectedCategory.id ?\n                    <Button\n                    variant={'outline-light'}\n                    onClick={() => {\n                        setItemVisible(true);\n                        setModalItem({});\n                    }}\n                    >Добавить новый товар</Button>\n                    : \"\"\n                    }\n\n\n                    <ItemList\n                    modal={{setModalItem, setItemVisible}}\n                    />\n                    <PaginationPages/>\n                    </Col>\n                </Row>\n                <CreateCategory\n                modalCategory={modalCategory}\n                setModalCategory={setModalCategory}\n                show={categoryVisible}\n                onHide={() => setCategoryVisible(false)} />\n                <CreateItem\n                modalItem={modalItem}\n                setModalItem={ setModalItem}\n                show={itemVisible}\n                onHide={() => setItemVisible(false)}/>\n            </Container>\n        </div>\n    );\n})\n\n\nexport default Admin;\n","/home/syvv/projects/grob43/admin/src/pages/Auth.js",[],"/home/syvv/projects/grob43/admin/src/components/NavBar.js",[],"/home/syvv/projects/grob43/admin/src/components/modals/CreateItem.js",[],"/home/syvv/projects/grob43/admin/src/components/modals/CreateCategory.js",[],"/home/syvv/projects/grob43/admin/src/components/PaginationPages.js",["103"],"import React, { useContext } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport { Context } from '../index';\nimport ReactPaginate from 'react-paginate';\n\n\nconst PaginationPages = observer(({ }) => {\n    const { item } = useContext(Context)\n    const pageCount = Math.ceil(item.totalCount / item.limit);\n    const pages = [];\n\n    for (let i = 0; i < pageCount; i++) {\n        pages.push(i + 1)\n    }\n\n    return (\n        <ReactPaginate\n        breakLabel=\"...\"\n        nextLabel=\">\"\n        activeClassName={\"active\"}\n        onPageChange={ (e) => { item.setPage(e.selected + 1)}}\n        pageRangeDisplayed={3}\n        pageCount={Math.ceil(item.totalCount / item.limit)}\n        previousLabel=\"<\"\n        renderOnZeroPageCount={null}\n        className=\"mt-5 pagination\"\n        pageClassName=\"page-item\"\n        pageLinkClassName=\"page-link\"\n        previousClassName=\"page-item\"\n        previousLinkClassName=\"page-link\"\n        nextClassName=\"page-item\"\n        nextLinkClassName=\"page-link\"\n      />\n    );\n});\n\nexport default PaginationPages;\n","/home/syvv/projects/grob43/admin/src/components/ItemList.js",["104","105"],"import { observer } from 'mobx-react-lite';\nimport React, { useContext, useState } from 'react';\nimport { Context } from '../index';\nimport { Row, Modal, Button } from 'react-bootstrap';\nimport Item from './Item';\nimport { itemRemove, itemReadAllByCategory } from '../http/itemAPI';\n\nconst ItemList = observer(( {modal}) => {\n    const { item } = useContext(Context);\n    const [confirmModalVisible, setConfirmMoadlVisible] = useState(false);\n    const [confirmItem, setConfirmItem] = useState({});\n\n    const deleteItem = async (id) => {\n          try {\n            await itemRemove(id);\n            itemReadAllByCategory(item.selectedCategory.id).then(data => item.setItems(data));\n            setConfirmMoadlVisible(false);\n          } catch (e) {\n            alert(e.response.data.message);\n          }\n    }\n\n    return (\n      <Row className='d-flex'>\n        {item.items.map(item =>\n            <Item\n            setConfirmItem={setConfirmItem}\n            setConfirmMoadlVisible={setConfirmMoadlVisible}\n            modal={modal}\n            key={item.id}\n            item={item}\n            />\n        )}\n\n        <Modal\n          show={confirmModalVisible}\n          onHide={() => setConfirmMoadlVisible(false)}\n          size=\"lg\"\n          aria-labelledby=\"contained-modal-title-vcenter\"\n          centered\n        >\n        <Modal.Header closeButton>\n          <Modal.Title>Удаление категории</Modal.Title>\n        </Modal.Header>\n\n        <Modal.Body>\n          <p>Вы уверены что хотите удалить товар {confirmItem.name}?\n          Действие необратимо!\n          </p>\n        </Modal.Body>\n\n        <Modal.Footer>\n          <Button onClick={() => {\n            if (item.items.length == 1 && item.page != 1) {\n              item.setPage(item.page - 1);\n            }\n            deleteItem(confirmItem.id);\n            setConfirmMoadlVisible(false);\n          }} variant=\"primary\">Подтвердить</Button>\n          <Button onClick={() => setConfirmMoadlVisible(false)} variant=\"secondary\">Закрыть</Button>\n        </Modal.Footer>\n      </Modal>\n      </Row>\n    );\n});\n\nexport default ItemList;\n","/home/syvv/projects/grob43/admin/src/components/CategoriesBar.js",[],"/home/syvv/projects/grob43/admin/src/components/Item.js",[],"/home/syvv/projects/grob43/admin/src/components/CategoryForm.js",["106","107","108"],"import React, { createRef } from \"react\";\nimport { Form, Row, Col, CloseButton, Card } from \"react-bootstrap\";\nimport { $host } from \"../http\";\nimport { uploadImage, deleteImage } from \"../http/itemAPI\";\n\nclass CategoryForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = props.state;\n        this.setModalCategory = props.setModalCategory;\n        this.setForm = props.setForm;\n        this.state.gallery = this.state.imgPath ? [this.state.imgPath] : [];\n        this.gallery = [];\n        this.state.drag = false;\n        this.filePicker = createRef();\n\n        this.handlePick = () => {\n            this.filePicker.current.click();\n        }\n\n        this.setValidForm = props.setValidForm;\n        this.state.validTitle = true;\n        this.state.validImgPath = true;\n\n    }\n\n    formValidation(form) {\n        this.setState({ validTitle: this.validationTitle(form.title) })\n        this.setState({ validImgPath: this.validationImgPath(form.imgPath) })\n        let valid = this.validationTitle(form.title) && this.validationImgPath(form.imgPath);\n        this.setValidForm(valid);\n    }\n\n    validationTitle(value) {\n        return this.notEmpty(value);\n    }\n\n    validationImgPath(value) {\n        return this.notEmpty(value);\n    }\n\n    notEmpty(value) {\n        return Boolean(value !== 0 && value !== \"\" && value);\n    }\n\n    changeTitle(e) {\n        this.setState({ title: e.target.value })\n    }\n\n    galleryPush(imgPath) {\n        let gallery = [imgPath]\n        this.setState({ gallery: gallery });\n        this.passForm();\n    }\n\n    async galleryDelete(imgPath) {\n        let gallery = [...this.state.gallery].filter((img) => img !== imgPath);\n        deleteImage(imgPath);\n        this.setState({ gallery: gallery });\n        this.state.gallery = gallery;\n        this.passForm();\n    }\n\n    passForm() {\n        let form = {\n            title: this.state.title,\n            description: this.state.description,\n            imgPath: this.state.gallery[0] ?? \"\"\n        };\n        this.setState({ imgPath: form.imgPath });\n        this.formValidation(form);\n        this.setForm(form);\n    }\n\n\n    onDropHandler(e) {\n        e.preventDefault();\n        let files = [...e.dataTransfer.files];\n        this.uploadFiles(files);\n        this.setState({ drag: false });\n    }\n\n    onInputFileChange(e) {\n        let files = [...e.target.files];\n        this.uploadFiles(files);\n        this.setState({ drag: false });\n    }\n\n    uploadFiles(files) {\n        const fileExtensions = ['jpeg', 'jpg', 'png', 'webp', 'gif', 'svg']\n        if (files && !this.state.imgPath) {\n            if (fileExtensions.includes(files[0].name.split('.').at(-1).toLowerCase())) {\n                uploadImage(files[0])\n                    .then(data => {\n                        this.galleryPush(data.imgPath);\n                    })\n            }\n        }\n    }\n\n\n\n    render() {\n        return (\n            <Form onKeyUp={() => this.passForm()} onDrop={() => this.passForm()} onKeyDown={(e) => {if (e.key === 'Enter') e.preventDefault()}}>\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\">Заголовок</Form.Label>\n                    <Col sm=\"10\">\n                        <Form.Control\n                            value={this.state.title}\n                            onChange={(e) => this.changeTitle(e)}\n                            placeholder=\"Заголовок\"\n                            className={`  ${this.state.validTitle ? \"\" : \"border-danger\"} `} />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\">Описание</Form.Label>\n                    <Col sm=\"10\">\n                        <Form.Control as=\"textarea\" rows={3} value={this.state.description} onChange={(e) => this.setState({ description: e.target.value })} onKeyDown={(e) => {if (e.key === 'Enter') e.stopPropagation()}} placeholder=\"Описание\" />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\">Изображение</Form.Label>\n\n                    <input\n                        style={{\n                            opacity: 0,\n                            widows: 0,\n                            height: 0\n                        }}\n                        type=\"file\"\n                        accept=\"image/*, .png, .jpg, .gif, .web, .webp, .svg\"\n                        onChange={(e) => this.onInputFileChange(e)}\n                        ref={this.filePicker}\n                        onClick={(e) => { if (this.state.imgPath) { e.preventDefault(); alert(\"Для категории невозможно загрузить более одного изображения, удалите текущее прежде чем загрузить новое\") } }}\n                        multiple\n                    />\n\n                    <Card style={{ width: \"100%\", height: '100px' }} className={`m-2 d-flex flex-row  ${this.state.drag ? \"border-primary\" : \"\"} ${this.state.validImgPath ? \"\" : \"border-danger\"}`}\n                        onClick={this.handlePick}\n                        onDragStart={(e) => {\n                            e.preventDefault();\n                            this.setState({ drag: true });\n                        }}\n                        onDragLeave={(e) => {\n                            e.preventDefault();\n                            this.setState({ drag: false });\n                        }}\n                        onDragOver={(e) => {\n                            e.preventDefault();\n                            this.setState({ drag: true });\n                        }}\n                        onDrop={(e) => this.onDropHandler(e)}\n                    >\n\n                        {this.state.gallery.length > 0 ? this.state.gallery.map((img) =>\n                            <Card\n                                key={img}\n                                style={{ width: \"100px\", height: \"100px\", position: \"relative\" }}\n                                onClick={\n                                    (e) => { e.stopPropagation() }\n                                }\n                            >\n                                <CloseButton style={{ position: 'absolute', top: 5, right: 10, fontSize: 32 }} className={'text-danger'}\n                                    onClick={\n                                        () => { this.galleryDelete(img) }\n                                    } />\n                                <img src={process.env.REACT_APP_API_URL + img} style={{ objectFit: 'cover', width: '100%', height: '100%' }} />\n                            </Card>\n                        ) :\n                            <span\n                                style={{\n                                    display: 'flex',\n                                    width: '100%',\n                                    alignItems: 'center',\n                                    justifyContent: 'center'\n                                }}\n                            >Перетяните нужные изображения в эту область</span>\n                        }\n                    </Card>\n                </Form.Group>\n            </Form>\n        );\n    }\n}\n\nexport default CategoryForm\n","/home/syvv/projects/grob43/admin/src/components/ItemForm.js",["109","110","111","112","113","114","115"],"import React, { createRef } from \"react\";\nimport { Form, Row, Col, CloseButton, Card } from \"react-bootstrap\";\nimport { $host } from \"../http\";\nimport { uploadImage } from \"../http/itemAPI\";\n\nclass ItemForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = props.state;\n        this.setModalItem = props.setModalItem;\n        this.state.galleryDrop = this.state.gallery ? [...this.state.gallery] : [];\n        this.state.galleryDrop = this.state.galleryDrop.map((imgPath, id) => { return { order: id, imgPath: imgPath, id: id } });\n        this.counter = this.state.galleryDrop.length;\n        this.state.drag = false;\n        this.category = props.category;\n        this.setForm = props.setForm;\n\n        this.setValidForm = props.setValidForm;\n        this.state.validName = true;\n        this.state.validArticle = true;\n\n        this.filePicker = createRef();\n\n        this.handlePick = () => {\n            this.filePicker.current.click();\n        }\n\n    }\n\n    formValidation(form) {\n        let valid = this.validationName(form.name) && this.validationArticle(form.article);\n        this.setValidForm(valid);\n    }\n\n    validationName(value) {\n        let valid = this.notEmpty(value);\n        this.setState({ validName: valid })\n        return this.notEmpty(value);\n    }\n\n    validationArticle(value) {\n        let valid = this.notEmpty(value);\n        this.setState({ validArticle: valid })\n        return valid;\n    }\n\n    notEmpty(value) {\n        return Boolean(value !== 0 && value !== \"\" && value);\n    }\n\n\n    passForm() {\n\n        let gallery = this.state.galleryDrop\n            .sort((a, b) => {\n                if (a.order > b.order) {\n                    return 1\n                } else {\n                    return -1;\n                }\n            })\n            .map(pic => pic.imgPath);\n        let form = {\n            name: this.state.name,\n            description: this.state.description,\n            article: this.state.article,\n            price: Number(this.state.price),\n            categoryId: Number(this.state.categoryId),\n            gallery: gallery\n        };\n        this.formValidation(form)\n        this.setForm(form);\n    }\n\n    galleryPush(imgPath) {\n        let gallery = [...this.state.galleryDrop, { order: Date.now(), imgPath: imgPath, id: Date.now() }];\n        this.setState({ galleryDrop: gallery });\n        this.state.galleryDrop = gallery;\n        this.passForm()\n    }\n\n    galleryDelete(imgOrder) {\n        let gallery = [...this.state.galleryDrop].filter((img) => img.order !== imgOrder);\n        this.setState({ galleryDrop: gallery });\n        this.state.galleryDrop = gallery;\n        this.passForm()\n    }\n\n    dragPreviewStart(e, img) {\n        this.setState({ currentIMG: { ...img } })\n    }\n\n    dragPreviewLeave(e) {\n    }\n\n    dragPreviewEnd(e) {\n        this.passForm()\n    }\n    dragPreviewOver(e) {\n        e.preventDefault();\n    }\n\n    previewDrop(e, img) {\n        e.preventDefault();\n\n        let files = [...e.dataTransfer.files];\n        if (files.length === 0) {\n            let gallery = this.state.galleryDrop.map(\n                (imgMap) => {\n                    if (imgMap.id === img.id) {\n                        return { ...imgMap, order: this.state.currentIMG.order }\n                    };\n                    if (imgMap.id === this.state.currentIMG.id) {\n                        return { ...imgMap, order: img.order }\n                    }\n                    return imgMap;\n                });\n\n            this.setState({ galleryDrop: gallery })\n            this.state.galleryDrop = gallery;\n            this.passForm();\n\n        }\n    }\n\n\n    onDropHandler(e) {\n        e.preventDefault();\n        let files = [...e.dataTransfer.files];\n        this.uploadFiles(files);\n        this.setState({ drag: false });\n    }\n\n    onInputFileChange(e) {\n        let files = [...e.target.files];\n        this.uploadFiles(files);\n        this.setState({ drag: false });\n    }\n\n    uploadFiles(files) {\n        const fileExtensions = ['jpeg', 'jpg', 'png', 'webp', 'gif', 'svg']\n        if (files) {\n            files.forEach((file) => {\n                if (fileExtensions.includes(file.name.split('.').at(-1).toLowerCase())) {\n                        uploadImage(file)\n                        .then(data => {\n                            this.galleryPush(data.imgPath);\n                        })\n                }\n            })\n        }\n    }\n\n\n    render() {\n        return (\n            <Form onKeyUp={() => this.passForm()} onDrop={() => this.passForm()} onChange={() => this.passForm()} onKeyDown={(e) => {if (e.key === 'Enter') e.preventDefault()}} >\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\">Наименование</Form.Label>\n                    <Col sm=\"10\">\n                        <Form.Control\n                            value={this.state.name}\n                            onChange={(e) => this.setState({ name: e.target.value })}\n                            placeholder=\"Наименование\"\n                            className={`  ${this.state.validName ? \"\" : \"border-danger\"} `}\n                        />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\">Описание</Form.Label>\n                    <Col sm=\"10\">\n                        <Form.Control as=\"textarea\"\n                        rows={3}\n                        value={this.state.description}\n                        onChange={(e) => this.setState({ description: e.target.value })}\n                        onKeyDown={(e) => {if (e.key === 'Enter') e.stopPropagation()}}\n                        placeholder=\"Описание\"\n                        />\n                    </Col>\n                </Form.Group>\n\n\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\">Артикул</Form.Label>\n                    <Col sm=\"10\">\n                        <Form.Control\n                            value={this.state.article}\n                            onChange={(e) => this.setState({ article: e.target.value })}\n                            placeholder=\"Артикул\"\n                            className={`  ${this.state.validArticle ? \"\" : \"border-danger\"} `}\n                        />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\">Стоимость</Form.Label>\n                    <Col sm=\"10\">\n                        <Form.Control type=\"number\" value={this.state.price} onChange={(e) => this.setState({ price: e.target.value })} placeholder=\"Стоимость\" />\n                    </Col>\n                </Form.Group>\n\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\" className={\"input-group-text\"} >Категория</Form.Label>\n                    <Col sm=\"10\">\n                        <select className={\"custom-select\"} defaultValue={this.state.categoryId} onChange={(e) => { this.state.categoryId = e.target.value; this.setState({ categoryId: e.target.value }) }} >\n                            {\n\n                                <option value={this.state.categoryId}>{\n                                    this.category.categories.find(cat => cat.id == this.state.categoryId).title\n                                }</option>\n\n                            }\n                            {\n                                this.category.categories\n                                    .filter(\n                                        cat => cat.id !== this.category.selectedCategory.id\n                                    )\n                                    .map(cat =>\n                                        <option key={cat.id} value={cat.id}>{cat.title}</option>\n                                    )\n\n                            }\n                        </select>\n                    </Col>\n\n                </Form.Group>\n\n\n                <Form.Group as={Row} className=\"mb-3\">\n                    <Form.Label column sm=\"2\">Галерея</Form.Label>\n\n                    <input\n                        style={{\n                            opacity: 0,\n                            widows: 0,\n                            height: 0\n                        }}\n                        type=\"file\"\n                        accept=\"image/*, .png, .jpg, .gif, .web, .webp, .svg\"\n                        onChange={(e) => this.onInputFileChange(e)}\n                        ref={this.filePicker}\n                        multiple\n                    />\n\n\n                    <Card\n                        style={{ width: \"100%\", minHeight: 110 }}\n                        className={`m-2 d-flex flex-row flex-wrap  ${this.state.drag ? \"border-primary\" : \"\"} `}\n                        onDragEnter={(e) => {\n                            e.preventDefault();\n                            this.setState({ drag: true });\n                        }}\n                        onDragLeave={(e) => {\n                            e.preventDefault();\n                            this.setState({ drag: false });\n                        }}\n                        onDragOver={(e) => {\n\n                            e.preventDefault();\n                            this.setState({ drag: true });\n                        }}\n                        onDrop={(e) => this.onDropHandler(e)}\n                        onClick={this.handlePick}\n                    >\n                        {this.state.galleryDrop.length > 0 ? this.state.galleryDrop\n                            .sort((a, b) => {\n                                if (a.order > b.order) {\n                                    return 1\n                                } else {\n                                    return -1;\n                                }\n                            })\n                            .map((img) =>\n                                <Card\n                                    key={img.order}\n                                    style={{ width: \"100px\", height: \"100px\", position: \"relative\" }}\n                                    draggable={true}\n                                    onDragStart={(e) => this.dragPreviewStart(e, img)}\n                                    onDragEnd={(e) => this.dragPreviewEnd(e)}\n                                    onDragLeave={(e) => this.dragPreviewLeave(e)}\n                                    onDragOver={(e) => this.dragPreviewOver(e)}\n                                    onDrop={(e) => this.previewDrop(e, img)}\n                                    onClick={(e) => e.stopPropagation()}\n                                >\n                                    <CloseButton\n                                        style={{ position: 'absolute', top: 5, right: 10, fontSize: 32 }}\n                                        className={'text-danger'}\n                                        onClick={\n                                            () => { this.galleryDelete(img.order) }\n                                        } />\n                                    <img\n                                        src={process.env.REACT_APP_API_URL + img.imgPath}\n                                        style={{ objectFit: 'cover', width: '100%', height: '100%' }}\n                                    />\n                                </Card>\n                            ) :\n                            <span\n                                style={{\n                                    display: 'flex',\n                                    width: '100%',\n                                    alignItems: 'center',\n                                    justifyContent: 'center'\n                                }}\n                            >Перетяните нужные изображения в эту область</span>\n                        }\n                    </Card>\n\n                </Form.Group>\n            </Form>\n        );\n    }\n}\n\nexport default ItemForm\n",{"ruleId":"116","replacedBy":"117"},{"ruleId":"118","replacedBy":"119"},{"ruleId":"120","severity":1,"message":"121","line":8,"column":10,"nodeType":"122","messageId":"123","endLine":8,"endColumn":25},{"ruleId":"120","severity":1,"message":"124","line":8,"column":27,"nodeType":"122","messageId":"123","endLine":8,"endColumn":48},{"ruleId":"120","severity":1,"message":"125","line":11,"column":18,"nodeType":"122","messageId":"123","endLine":11,"endColumn":22},{"ruleId":"120","severity":1,"message":"126","line":12,"column":13,"nodeType":"122","messageId":"123","endLine":12,"endColumn":20},{"ruleId":"127","severity":1,"message":"128","line":36,"column":8,"nodeType":"129","endLine":36,"endColumn":10,"suggestions":"130"},{"ruleId":"120","severity":1,"message":"131","line":57,"column":12,"nodeType":"122","messageId":"123","endLine":57,"endColumn":16},{"ruleId":"127","severity":1,"message":"132","line":30,"column":8,"nodeType":"129","endLine":30,"endColumn":42,"suggestions":"133"},{"ruleId":"134","severity":1,"message":"135","line":7,"column":35,"nodeType":"136","messageId":"137","endLine":7,"endColumn":38},{"ruleId":"138","severity":1,"message":"139","line":54,"column":35,"nodeType":"140","messageId":"137","endLine":54,"endColumn":37},{"ruleId":"138","severity":1,"message":"141","line":54,"column":53,"nodeType":"140","messageId":"137","endLine":54,"endColumn":55},{"ruleId":"120","severity":1,"message":"142","line":3,"column":10,"nodeType":"122","messageId":"123","endLine":3,"endColumn":15},{"ruleId":"143","severity":1,"message":"144","line":60,"column":9,"nodeType":"145","messageId":"146","endLine":60,"endColumn":19},{"ruleId":"147","severity":1,"message":"148","line":170,"column":33,"nodeType":"149","endLine":170,"endColumn":144},{"ruleId":"120","severity":1,"message":"142","line":3,"column":10,"nodeType":"122","messageId":"123","endLine":3,"endColumn":15},{"ruleId":"143","severity":1,"message":"144","line":78,"column":9,"nodeType":"145","messageId":"146","endLine":78,"endColumn":19},{"ruleId":"143","severity":1,"message":"144","line":85,"column":9,"nodeType":"145","messageId":"146","endLine":85,"endColumn":19},{"ruleId":"143","severity":1,"message":"144","line":120,"column":13,"nodeType":"145","messageId":"146","endLine":120,"endColumn":23},{"ruleId":"143","severity":1,"message":"144","line":206,"column":117,"nodeType":"145","messageId":"146","endLine":206,"endColumn":127},{"ruleId":"138","severity":1,"message":"139","line":210,"column":81,"nodeType":"140","messageId":"137","endLine":210,"endColumn":83},{"ruleId":"147","severity":1,"message":"148","line":292,"column":37,"nodeType":"149","endLine":295,"endColumn":39},"no-native-reassign",["150"],"no-negated-in-lhs",["151"],"no-unused-vars","'readAllCategory' is defined but never used.","Identifier","unusedVar","'itemReadAllByCategory' is defined but never used.","'item' is assigned a value but never used.","'loading' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'user'. Either include it or remove the dependency array.","ArrayExpression",["152"],"'data' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'item'. Either include it or remove the dependency array.",["153"],"no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","Expected '!==' and instead saw '!='.","'$host' is defined but never used.","react/no-direct-mutation-state","Do not mutate state directly. Use setState().","MemberExpression","noDirectMutation","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation",{"desc":"154","fix":"155"},{"desc":"156","fix":"157"},"Update the dependencies array to be: [user]",{"range":"158","text":"159"},"Update the dependencies array to be: [item, item.page, item.selectedCategory]",{"range":"160","text":"161"},[1085,1087],"[user]",[1069,1103],"[item, item.page, item.selectedCategory]"]